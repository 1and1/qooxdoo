// generic application.json
{
  "include" :
  {
    "apiconf": "../../../application/apiviewer/config.json"
  },


  "jobs" :
  {
    "common" :
    {
      "let" :
      {
        "ROOT"         : ".",
        "QOOXDOO_PATH" : "../../framework",
        "QOOXDOO_URI"  : "../${QOOXDOO_PATH}",
        "BUILD_PATH"   : "${ROOT}/build"
      },

      "library" :
      [
        {
          "manifest" : "${QOOXDOO_PATH}/Manifest.json",
          "uri"      : "${QOOXDOO_URI}"
        },

        {
          "manifest" : "${ROOT}/Manifest.json",
          "uri"      : ".."
        }
      ],

      "include" :
      [
        "${APPLICATION}.Application"
      ],

      "settings" :
      {
        "qx.version"     : "0.8",
        "qx.application" : "${APPLICATION}.Application"
      }
    },


    "source-script" :
    {
      "extend" : ["common"],

      "settings" :
      {
        // resource compat to 0.7.x
        "qx.resourceUri"             : "${QOOXDOO_URI}/source/resource",
        "${APPLICATION}.resourceUri" : "../source/resource"
      },

      "script" :
      {
        "file" : "${ROOT}/source/script/${APPLICATION}.js"
      }
    },


    "source" :
    {
      "run" :
      [
        "source-script"
      ]
    },


    "build-script" :
    {
      "extend" : ["common"],

      "settings" :
      {
        // resource compat to 0.7.x
        "qx.resourceUri" : "resource",
        "${APPLICATION}.resourceUri" : "resource"
      },

      "variants" :
      {
        "qx.debug" : ["off"]
      },

      "compile" :
      {
        "target" : "${BUILD_PATH}",
        "file" : "${BUILD_PATH}/script/${APPLICATION}.js",
        "uri"  : "script/${APPLICATION}.js",
        "optimize" : ["basecalls", "variables", "privates"]
      }
    },


    "build-files" :
    {
      "extend" : ["common"],

      "copy-files" :
      {
        "files" :
        [
          "index.html"
        ],

        "target" : "${BUILD_PATH}"
      }
    },


    "build-resources":
    {
      "extend" : ["common"],

      "copy-resources" :
      {
        "target"          : "${BUILD_PATH}",
        "resource-filter" : true
      }
    },


    "build" :
    {
      "run" :
      [
        "build-resources",
        "build-script",
        "build-files"
      ]
    },


    "api" :
    {
      "extend" : ["apiconf/jobs/build"],

      "let" :
      {
        "ROOT" : "../apiviewer",
        "BUILD_PATH" : "./api",
        "API_INCLUDE" : ["qx.*", "${APPLICATION}.*"]
      },

      "library" :
      [
        {
          "manifest" : "Manifest.json",
          "uri"      : ".."
        }
      ]
    }
  }
}

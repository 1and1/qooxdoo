<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>qooxdoo &raquo; Demo</title>
  <link type="text/css" rel="stylesheet" href="../../css/layout.css"/>
  <!--[if IE]>
  <link type="text/css" rel="stylesheet" href="../../css/layout_ie.css"/>
  <![endif]-->
  <script type="text/javascript" src="../../script/sample.js"></script>
</head>
<body>
  <script type="text/javascript" src="../../script/layout.js"></script>

  <div id="demoDescription">
    <p>Test the localization of different widgets<p>
  </div>

  <script type="text/javascript">

	qx.Locale.define("sample.de", {
		"A date: ": "Ein Datum: ",
		"Locale: ": "Lokalisierung: ",
		"Locale information": "Landesinformationen",
		
    "Undo": "Rückgängig",
    "Redo": "Wiederholen",
    "Cut": "Aussschneiden",
    "Copy": "Kopieren",
    "Paste": "Einfügen",
    "Delete": "Löschen",
    "Select All": "Alles markieren",
    "Search": "Suchen",
    "Search Again": "Weiter suchen",
    "Command Menu (keyboard shortcuts)": "Command Menü (Tastaturkürzel)",

    "Open Color Popup": "Öffne Farbauswahl",
    "Basic Colors": "Grundfarben",
		"Template Colors": "Beispielfarben",
		"Recent Colors": "Vorherige Farben",

		"Territory code:": "Landescode:",
		"Date format medium:": "Mittellanges Datumsformat:",
		"Date medium:": "Mittellanges Datum:",
		"Date format long:": "Langes Datumsformat:",
		"Date long:": "Langes Datum",
		"Date format full:": "Vollständiges Datumsformat:",
		"Date full:": "Vollständiges Datum",
		
		"Time format short:": "Kurzes Zeitformat:",
		"Time short:": "Zeit (kurz):",
		"Time format long:": "Langes Zeitformat:",
		"Time long:": "Zeit (lang):",
    	
		"Week start:": "Wochenanfang:",
		"Format of %1:": "Format von %1:"
	});
	
	qx.Locale.define("sample.fr", {
		// Translate me
	});

	qx.Locale.define("sample.es", {
		// Translate me
	});

	qx.Locale.define("sample.zh", {
		// Translate me
	});
	
	//...

  var locales = ["de_DE", "de_AT", "en_US", "fr_FR", "tr", "it", "es_ES", "sv", "ar", "zh"];
  
  qx.locale.manager.Manager.getInstance().setLocale(locales[0]);

  qx.core.Init.getInstance().defineMain(function()
  {
    var d = qx.ui.core.ClientDocument.getInstance();

	 // locale selection
	var hb2 = new qx.ui.layout.HorizontalBoxLayout(); hb2.set({top:50, left:20, spacing:3});
    var l2 = new qx.ui.basic.Label(this.tr("Locale: "));
    var select = new qx.ui.form.ComboBox();
    for (var i=0; i<locales.length; i++) {
      select.add(new qx.ui.form.ListItem(locales[i]));
    }
    select.setSelected(select.getList().getFirstChild());
    select.addEventListener("changeSelected", function(e) {
      var locale = e.getData().getLabel();
      qx.locale.manager.Manager.getInstance().setLocale(locale);
	  });
    hb2.add(l2, select);
    d.add(hb2);

    var frame = new qx.ui.layout.VerticalBoxLayout();
    frame.set({left: 20, top: 120, width: "auto", height: "auto", spacing: 20});


    // DateChooserButton
    var hb1 = new qx.ui.layout.HorizontalBoxLayout(); hb1.set({height: "auto", spacing:3});
    var l1 = new qx.ui.basic.Label(this.tr("A date: "));
    var tf1 = new qx.ui.form.TextField(); tf1.set({ width: 130, height:20});
    var dcb1 = new qx.ui.component.DateChooserButton(); dcb1.set({ width: 20 });
    dcb1.setTargetWidget(tf1);
    hb1.add(l1, tf1, dcb1);
    frame.add(hb1);

    
    // DateChooser
    var chooser = new qx.ui.component.DateChooser;
    chooser.setWidth("auto");
    chooser.setHeight("auto");
    frame.add(chooser);

    
    // Commands
    var undo_cmd = new qx.client.Command("Ctrl+Z");
    var redo_cmd = new qx.client.Command("Ctrl+Y");
    var cut_cmd = new qx.client.Command("Ctrl+X");
    var copy_cmd = new qx.client.Command("Ctrl+C");
    var paste_cmd = new qx.client.Command("Ctrl+V");
    var delete_cmd = new qx.client.Command("Del");
    var select_all_cmd = new qx.client.Command("Ctrl+A");
    var search_cmd = new qx.client.Command("Ctrl+F");
    var search_again_cmd = new qx.client.Command("F3");

    var m1 = new qx.ui.menu.Menu;
    m1.add(new qx.ui.menu.Button(this.tr("Undo"), null, undo_cmd));
    m1.add(new qx.ui.menu.Button(this.tr("Redo"), null, redo_cmd));
    m1.add(new qx.ui.menu.Separator());
    m1.add(new qx.ui.menu.Button(this.tr("Cut"), "icon/16/edit-cut.png", cut_cmd));
    m1.add(new qx.ui.menu.Button(this.tr("Copy"), "icon/16/edit-copy.png", copy_cmd));
    m1.add(new qx.ui.menu.Button(this.tr("Paste"), "icon/16/edit-paste.png", paste_cmd));
    m1.add(new qx.ui.menu.Button(this.tr("Delete"), "icon/16/edit-delete.png", delete_cmd));
    m1.add(new qx.ui.menu.Button(this.tr("Select All"), null, select_all_cmd));
    m1.add(new qx.ui.menu.Separator());
    m1.add(new qx.ui.menu.Button(this.tr("Search"), null, search_cmd));
    m1.add(new qx.ui.menu.Button(this.tr("Search Again"), null, search_again_cmd));
    d.add(m1);

    var w1 = new qx.ui.form.Button(this.tr("Command Menu (keyboard shortcuts)"));
    w1.addEventListener("click", function(e) {
      if (m1.isSeeable()) {
        m1.hide();
      } else {
        var el = this.getElement();
        m1.setLeft(qx.dom.Location.getPageBoxLeft(el));
        m1.setTop(qx.dom.Location.getPageBoxBottom(el));
        m1.show();
      };
      e.setPropagationStopped(true);
    });
    w1.addEventListener("mousedown", function(e) {
      e.setPropagationStopped(true);
    });
    frame.add(w1);
    
    // ColorPopup
    var mybtn = new qx.ui.form.Button(this.tr("Open Color Popup"));
    mybtn.addEventListener("execute", function() {
      mypop.setTop(qx.dom.Location.getPageBoxBottom(this.getElement()));
      mypop.setLeft(qx.dom.Location.getPageBoxLeft(this.getElement()));
      mypop.show();
    });
    frame.add(mybtn);
    var mytables =
    {
      core : {
        label : this.tr("Basic Colors"),
        values : [ "#000", "#333", "#666", "#999", "#CCC", "#FFF", "red", "green", "blue", "yellow", "teal", "maroon" ]
      },
      template : {
        label : this.tr("Template Colors"),
        values : [ "#B07B30", "#B07BC9", "#E3AEC9", "#7A2A53" ]
      },
      recent : {
        label : this.tr("Recent Colors"),

        // In this case we need named colors or rgb-value-strings, hex is not allowed currently
        values : [ "rgb(122,195,134)", "orange" ]
      }
    }
    var mypop = new qx.ui.component.ColorPopup(mytables);
    mypop.setValue(new qx.renderer.color.Color("#23F3C1"));
    d.add(mypop);

    
    // ColorSelector
    var mycolor = new qx.ui.component.ColorSelector;
    frame.add(mycolor);
    
    d.add(frame);

    
    // Info Box
    var fs = new qx.ui.groupbox.GroupBox(this.tr("Locale information"));
    fs.set({ left: 300, top: 50, width: 400, height: "auto"});
    var infoLabel = new qx.ui.basic.Label("");
    fs.add(infoLabel);
	  d.add(fs);
    
    var info = [];
    info.push("<table style='font-size:11px'><tr><td>"); 
    for (var i=0; i<13; i++) {
    	info.push(""); 
	    info.push("</td><td>"); 
	    info.push(""); 
	    info.push("</td></tr><td>"); 
    }
    info.push(""); 
    info.push("</td><td>"); 
    info.push("");
    info.push("</td></tr></table>");
    
    this.updateLocaleInformation = function() {
			var i = 0;
    	info[(i++ * 2) + 1] = this.tr("Locale:");
    	info[(i++ * 2) + 1] = qx.locale.manager.Manager.getInstance().getLocale();

    	info[(i++ * 2) + 1] = this.tr("Territory code:");
    	info[(i++ * 2) + 1] = qx.locale.manager.Manager.getInstance().getTerritory();

    	info[(i++ * 2) + 1] = this.tr("Date format medium:");
    	info[(i++ * 2) + 1] = qx.locale.Date.getDateFormat("medium");
    	info[(i++ * 2) + 1] = this.tr("Date medium:");
    	info[(i++ * 2) + 1] = (new qx.util.format.DateFormat(qx.locale.Date.getDateFormat("medium"))).format(new Date());

    	info[(i++ * 2) + 1] = this.tr("Date format long:");
    	info[(i++ * 2) + 1] = qx.locale.Date.getDateFormat("long");
    	info[(i++ * 2) + 1] = this.tr("Date long:");
    	info[(i++ * 2) + 1] = (new qx.util.format.DateFormat(qx.locale.Date.getDateFormat("long"))).format(new Date());

    	info[(i++ * 2) + 1] = this.tr("Date format full:");
    	info[(i++ * 2) + 1] = qx.locale.Date.getDateFormat("full");
    	info[(i++ * 2) + 1] = this.tr("Date full:");
    	info[(i++ * 2) + 1] = (new qx.util.format.DateFormat(qx.locale.Date.getDateFormat("full"))).format(new Date());

    	info[(i++ * 2) + 1] = this.tr("Time format short:");
    	info[(i++ * 2) + 1] = qx.locale.Date.getTimeFormat("short");
    	info[(i++ * 2) + 1] = this.tr("Time short:");
    	info[(i++ * 2) + 1] = (new qx.util.format.DateFormat(qx.locale.Date.getTimeFormat("short"))).format(new Date());
    	
    	info[(i++ * 2) + 1] = this.tr("Time format long:");
    	info[(i++ * 2) + 1] = qx.locale.Date.getTimeFormat("long");
    	info[(i++ * 2) + 1] = this.tr("Time long:");
    	info[(i++ * 2) + 1] = (new qx.util.format.DateFormat(qx.locale.Date.getTimeFormat("long"))).format(new Date());

    	info[(i++ * 2) + 1] = this.tr("Week start:");
    	info[(i++ * 2) + 1] = qx.locale.Date.getDayName("wide", qx.locale.Date.getWeekStart());

    	info[(i++ * 2) + 1] = this.tr("Format of %1:", 10000.12);
    	info[(i++ * 2) + 1] = qx.util.format.NumberFormat.getInstance().format(10000.12);

    	infoLabel.setHtml(info.join(""));
    };
    
    // update info box
    qx.locale.manager.Manager.getInstance().addEventListener("changeLocale", this.updateLocaleInformation, this);
    this.updateLocaleInformation();
    
  });
  </script>
</body>
</html>
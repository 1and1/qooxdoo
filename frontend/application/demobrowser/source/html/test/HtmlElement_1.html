<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>qooxdoo &raquo; Demo Browser</title>
  <script type="text/javascript" src="../../script/demo.js"></script>
  <script type="text/javascript" src="../util.js"></script>
</head>
<body>  
  <div id="description">
  </div>

  <div id="test"></div>

  <script type="text/javascript">
  qx.core.Init.getInstance().defineMain(function()
  {
    var doc = new qx.dom.Element(document.getElementById("test"));



    // Basics

    this.info("Basics");

    var el1 = new qx.dom.Element;
    var el2a = new qx.dom.Element;
    var el2b = new qx.dom.Element;
    var el3a = new qx.dom.Element;
    var el3b = new qx.dom.Element;

    el1.setAttribute("id", "el1");
    el2a.setAttribute("id", "el2a");
    el2b.setAttribute("id", "el2b");
    el3a.setAttribute("id", "el3a");
    el3b.setAttribute("id", "el3b");

    el1.addList(el2a, el2b);
    el2a.addList(el3a, el3b);
    doc.add(el1);

    el3a.setHtml("<b>hello</b>");

    el1.setStyle("color", "blue");
    el1.setStyle("width", "100px").setStyle("height", "100px");

    qx.dom.Element.flushQueue();





    // Positioned Insert #1

    this.info("Positioned Insert #1");

    var before1 = new qx.dom.Element;
    before1.setAttribute("id", "before1");
    doc.insertBefore(before1, el1);

    var after1 = new qx.dom.Element;
    after1.setAttribute("id", "after1");
    doc.insertAfter(after1, el1);

    qx.dom.Element.flushQueue();





    // Positioned Insert #1

    this.info("Positioned Insert #2");

    var before2 = new qx.dom.Element;
    before2.setAttribute("id", "before2");
    doc.insertAt(before2, 0);

    var after2 = new qx.dom.Element;
    after2.setAttribute("id", "after2");
    doc.insertAt(after2, 10);

    qx.dom.Element.flushQueue();




    // Move

    this.info("Move");

    doc.moveAfter(before2, before1);
    qx.dom.Element.flushQueue();

    doc.moveBefore(after2, after1);
    qx.dom.Element.flushQueue();




    // Switch

    this.info("Switch");

    var in1 = doc.indexOf(before2);
    var in2 = doc.indexOf(after2);

    doc.moveTo(before2, in2);
    doc.moveTo(after2, in1);

    qx.dom.Element.flushQueue();





    // Remove

    this.info("Remove");

    doc.remove(before2);
    doc.remove(after2);

    qx.dom.Element.flushQueue();



    // Re-add

    this.info("Re-add");

    doc.addList(before2, after2);

    qx.dom.Element.flushQueue();



    // Remove and Add and Remove and Add

    this.info("Remove and Add and Remove and Add");

    doc.removeList(before2, after2);
    doc.addList(before2, after2);
    doc.removeList(before2, after2);
    doc.addList(before2, after2);

    qx.dom.Element.flushQueue();




    // Move, remove & add

    this.info("Move, remove & add");

    doc.remove(before2);
    doc.moveAfter(before1, after1);
    doc.insertBefore(before2, before1);

    qx.dom.Element.flushQueue();

    /*
    BEFORE:        AFTER1:        AFTER2:        AFTER3:

    before1        before1        el1            el1
    el1            el1            after1         after1
    after1         after1         before1        before2
    before2        after2         after2         before1
    after2                                       after2
    */








    // Sort completely

    this.info("Sort completely");

    var a = doc.getChildren();
    for (var i=1, l=a.length; i<l; i++) {
      doc.moveTo(a[i], 0);
    }

    qx.dom.Element.flushQueue();

    // AFTER: after2, before1, before2, after1, el1






    // Rotation

    this.info("Rotation");

    doc.moveAfter(before1, before2);

    qx.dom.Element.flushQueue();

    // AFTER: after2, before2, before1, after1, el1
  });
  </script>
</body>
</html>

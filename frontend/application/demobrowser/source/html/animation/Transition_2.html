<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>qooxdoo &raquo; Demo Browser</title>
  <script type="text/javascript" src="../../script/demo.js"></script>
  <script type="text/javascript" src="../util.js"></script>
</head>
<body>
  <div id="description">
    <p>qx.fx.Transition contains mathematical functions for non-linear transitions in effects.</p>
  </div>

  <script type="text/javascript">

  var elementStyle = 'text-align:center;font-family:"Trebuchet MS","Lucida Grande",Verdana,sans-serif;color:white;left:90px;top:90px;position:absolute;width:200px;height:55px;border:2px #E5E5E5 solid;background-color:#134275;z-Index:2;';
  var myElement;

  function resetElement()
  {
    qx.bom.element.Style.setCss(myElement, elementStyle);
  }
  
  qx.core.Init.getInstance().defineMain(function()
  {
    var doc = qx.ui.core.ClientDocument.getInstance();
  	myElement = qx.bom.Element.create('div', { style : elementStyle });
  	var doc = qx.ui.core.ClientDocument.getInstance();

  	document.body.appendChild(myElement);
  
  	myElement.id = "testDiv";
  	myElement.innerHTML = 'Welcome to <br><b style="color:#F3FFB3;">qooxdoo</b> animations!';

		var transitionData = {
			linear      : "Linear is the default transition for many effects.",
      easeInQuad  : "EaseInQuad will accelerate exponentially.",
      easeOutQuad : "EaseOutQuad will slow down exponentially.",
      sinoidal    : "Sinoidal transition will accelerate sinusoidal.",
      reverse     : "Reverse behaves like linear, but in the opposite direction.",
      wobble      : "Wobble will bounce the element forwards and backwards.",
      spring      : "Spring will overshoot the target and then move back.",
      flicker     : "Alternates rapidly between start end target. Looks only nice on color effects.",
      pulse       : "Alternates between start and end. Looks only nice on color effects."
    };

		var combo = new qx.ui.form.ComboBox;
  	var btnShow = new qx.ui.form.Button("Show it!");
    var lblName = new qx.ui.basic.Label("Name");
    var lblDesc = new qx.ui.basic.Label("Description");
    var lblDur = new qx.ui.basic.Label("Duration");
    var textDesc = new qx.ui.embed.TextEmbed;
    var spDuration = new qx.ui.form.Spinner;

		lblName.setLocation(25, 50);
		lblDesc.setLocation(25, 75);
		lblDur.setLocation(25, 25);

		combo.setLocation(90, 50);
		textDesc.setLocation(90, 75);
		spDuration.setLocation(90, 25);

		btnShow.setLocation(23, 100);

		for (var transition in transitionData) {
			combo.add(new qx.ui.form.ListItem(transition));
		}

    combo.addListener("changeValue", function(){
      textDesc.setText(transitionData[this.getSelected().getLabel()]);
    });
    combo.addListener("appear", function(){
      this.setSelected(this.getList().getChildren()[0]);
    });

    spDuration.set({
      max : 10,
      min : 1
    });

    var nf = new qx.util.format.NumberFormat();
    nf.setMaximumFractionDigits(2);
    spDuration.setNumberFormat(nf);
    spDuration.getManager().setPrecision(2);

  	btnShow.addListener("execute", function(){
      var transition = combo.getSelected().getLabel();
      var animMove = new qx.fx.effect.core.Highlight(myElement, {
        startColor : "#134275",
        endColor : "#7CFC00",
        transition : qx.fx.Transition[transition],
        duration : spDuration.getValue(),
        mode : "absolute",
      });

      animMove.addListener("finish", resetElement);
      animMove.start();  	  
    });


  	doc.add(lblName, lblDesc, lblDur, combo, textDesc, spDuration, btnShow);
     
  });
  </script>
</body>
</html>
